Speaker A: Welcome to bankless, where we explore the frontier of Defi market structure and capital efficiency. Today on the show we're talking about Oval, a new DeFi primitive that Hartlamber from Uma is introducing to the world of DeFi's biggest lending markets. Billions of dollars have been liquidated from protocols like Aave Compound and Makerdao over the years, and these liquidations have been extremely inefficiently priced due to reasons, reasons that will be discussed here on the show today. The long arc of DeFi has been one that trends towards capital efficiency, efficient price discovery, and ultimately better quality products for its users. This episode today discusses a new mechanism to further DeFi's maturity on this very important arc. Hazu also joins us on this conversation today to discuss the way that Mev share from flashbots is a part of this conversation, as well as helping illuminate the further direction that DeFi is going forward as a whole with mechanisms like this. One more part to this conversation that I want to add here that was unsaid in the podcast. This conversation is about bringing mechanisms into DeFi that allows DeFi to leak less value to mevbots, allowing DeFi customers and users to retain all of that value, and also increasing the economic viability of the DeFi app layer on Ethereum and in crypto. Broadly, this is a transfer of value away from MEV arbitrageurs to DeFi apps. What this ultimately means is that this is a transfer of value away from ETH validators, the ultimate beneficiaries of MEV, and towards the users and customers of DeFi products on the Ethereum app layer has long been known that the ultimate destination of the Defi landscape, no matter what chain we're talking about, Ethereum, Cosmos, whatever, is that the value that MEV has will ultimately be retained by the source of that MEV, not by any downstream actors. And the reason for this is obvious. If you're an application that creates MEV, you're also the entity that has the most optionality of directing where that MeV goes and its conditions for capture. So why wouldn't you just capture it for yourself and improve your bottom line and the quality of your product for your users? This early hypothesis has been stated by many in the mev world, and it's the thing that the cosmos app chain believers have been chanting about for a while now, and it's being shown to come true within the innovation being discussed today on the podcast. So enough of my table setting. Let's go ahead and get right into the episode with Hart Lamber from Uma and Hazu from flashbots. But first, a moment to talk about some of these fantastic sponsors. Bank of the nation. I'm super excited to introduce you to Heart Lamber, the founder and CEO of Uma. Hart, welcome to the show.
Speaker B: Thanks, David. Thanks for having me.
Speaker A: Heart. We had you on two years ago, I think, to talk about Bridges way back in the day. It's good to have you back, my mandarin.
Speaker B: Yeah, good to be back. Good to see you.
Speaker A: And reoccurring guests on the podcast. Well, I guess both are reoccurring, but Hasu's been on a few more times than you. Heart Hasu strategy lead at flashbots, as well as just ecosystem researcher and crypto economic enthusiast. Hasu, welcome back to the podcast.
Speaker C: Hey, David, nice to meet you. Hi hart. Don't think we've met yet on a podcast, but I'm looking forward to this.
Speaker B: I like the crypto economic enthusiast moniker. That's a good one.
Speaker A: I think that's the right title for Hazu. I think that's the right title for most people that come on this podcast.
Speaker C: But Hazu especially, that doesn't make it very special. David, you know.
Speaker A: The lead crypto economic enthusiast that I know. My preferred. Okay, guys, we're gonna get into a conversation that I think bankless listeners will be familiar with. Long time bankless listeners. This is inside of the subject matter of MEV, maximally extractable value. Minor extractable value, later rebranded to maximally since we no longer have miners in Ethereum. But we're talking about a specific kind of mev, which has been dubbed Oracle extractable value. So I think this just falls inside of the category of MEV, but it's around a certain set of how the MEV arises, which is through oracles. And this is going to be a conversation that I think talks about the way that applications on ethereum produce MEV through oracles. The sustainability of applications, the healthiness of the aggregate DeFi applications, a lot of these different subject matters. It's probably going to be a decently technical episode, but I think we can also make it pretty understandable for people who already know what MEV is. Hart, can I ask you to maybe just set up the context of what we are talking about, the foundations for what's going on? Like I said, bankless listeners will know what MEV is, but applying it in an oracle framing might be a little bit new for them. What is the landscape? Landscape. What is the problem set that we are going to be addressing here on this episode today.
Speaker B: Yeah, absolutely. And we can make it concrete and then maybe generalize it a little bit more, too. But today, Oracle updates, and let's talk about like, Chainlink updates. Chainlink updates drop into the public mempool on Ethereum.
Speaker A: Chainlink price updates, price updates, correct. Price updates.
Speaker B: Chainlink price updates get dropped in the public mempool on Ethereum, and then they get used by defi protocols. And if a chainlink price update triggers a liquidation, if that price update drops below a liquidation target on Aave or compound position, that liquidation then triggers a bunch of things, but basically collateral getting sold. I mean, and it triggers mev. It's not dissimilar from a user submitting a Uniswap trade with slippage into the public mempool, which we all understand creates mev and creates a sandwich attack and creates other things where searchers will construct transactions to extract the maximum value possible from that Uniswap transaction. Well, basically we have the same thing going on with Chainlink price updates, where the chain link price update looks very conceptually similar to an unprotected, a uniswap transaction with slippage, and it creates mev that gets leaked and ultimately captured by ethereum validators.
Speaker A: And I believe that the amount of MeV that's captured from AaVE compound liquidations can be quite large. I think this probably happens more. This amount of mev capture is more when there's times of volatility and probably times of bull markets as well. And really just to set the stage here, we are talking about MeV. We were talking about MeV. This is Mev just, we're talking about specifically MeV that happens as a result of price oracle updates, which most of DeFi is chain link. Uh, so like, ether is at $1,000, it drops down to very quickly, $950. A bunch of djens get liquidated. But then there is the fight to be the liquidator of, uh, these positions. Is there like some numbers or some measurements or metrics about, like, how valuable this MEV is? Like, how much value is being squeezed out of these applications?
Speaker B: Yeah, totally. I mean, estimating MeV is quite difficult, but within AAVE and compound, we can have a very clear theoretical kind of bound. And the way aave and compound work is when a Chainlink update, price update comes in that causes liquidation. AAvE and compound then sell collateral at a discount. And the reason why they sell that collateral at a discount is because they really want to make sure the collateral gets sold to keep the protocol healthy. That discount is between five and 10%, depending on the asset. If we look back over the history of abe v two and v three and compound v two and v three over the last about two years, we can see that $150 million ish of liquidation discounts have been sold. So there's been liquidations, a billion and a half dollars liquidations that have caused discounts of about $150 million, and that money has been lost to MeV. If we zoom out and go a little bit further and look at you kind of think of AAVE and compound since their existence. I think that number is much bigger. It's like quarter billion, 300 million type number that has been lost because of liquidations that are really selling collateral too cheap.
Speaker A: Hazu, I want to get your perspective on what would happen if this were left unchecked. Hart talked about some parameters about collateral ether, or maybe less liquid assets being sold at a discount. Maybe you could talk about why it's being sold at a discount and why that's important to the protocol. And then overall, if this version of MeV is left unchecked, oracle extractable value, what would happen into the future? Because we all want ethereum, defi, any defi on any chain, to be the world's global financial system. Why do we have to solve this problem? Why is it important?
Speaker C: Yeah. So, to the first part of your question, so why is it sold at a discount? I think heart actually gave a very good explanation here. So, when you want to sell, or when you want to buy a token on uniswap, and the token is quite volatile, then you don't exactly know what slippage to set. Right. And so if you set a very tight slippage, then you risk not getting in the next block, because maybe the price moves against you. And the same is true for a lending market. So if they want to sell a token now, they have this trade off between basically setting a higher slippage, maximizing the chance to get into the next block, or setting basically a lower slippage, and risking that maybe the price doesn't take place in the first block, maybe it takes longer time.
Speaker A: Is it just a protective mechanism that they need to sell this collateral because they must not have bad debt?
Speaker C: Yeah. So, I mean, this is really a design choice. By the protocol itself, I would say. So if you're on uniswap and trading shitcoins. Okay, so what's the worst that can happen if you don't get to buy this position now? Okay, you maybe incur some kind of opportunity cost, but the lending market, you could argue, has a much higher responsibility to that capital. Right. So they manage the money effectively of many different depositors. Right. If they let someone get away with bad debt, then bad debt has to be socialized somehow. So in the first challenge probably would go, in the first instance, it would probably go to the token holders of that project as a first line of defense. And if that doesn't help, then at some point you have to socialize the money on depositors effectively because there's nobody else there in crypto, you don't have any legal recourse or anything like that. And so that's why traditionally lending markets have chosen to be very rigid about how fast they want to liquidate in order to minimize the risk that they internalize any of that bad debt either to their token holders or even to their depositors. I think that paradigm, I guess, is changing a little bit. So, I mean, if you look kind of at the slippage that, for example, a protocol like AaVE or compound has been quoting, five to 10% is a lot and it's more than maybe they need to. And so they tend to bleed a lot of money by doing that. And we've seen some protocols basically handle this problem by spinning up their own auction mechanisms. Like Mecca, for example, maker has, I believe, a reverse dutch auction. So basically the price that they charge to liquidate this collateral basically starts low and then it increases every block. And so this is at the opposite end of the spectrum, right? So where compound says, I must liquidate this in one block, and so I'm willing to pay a lot for this or I'm willing to accept a low price, you could also say on the other end, maker says, you know, I'm fine. What maker actually does is they only bring oracle updates on chain with 1 hour delay. So the oracle update comes on chain, but it can only be used for liquidation after 1 hour. So they actually say, hey, borrowers, we're going to give you a big fat warning. Your position is underwater now, right now, and if you don't actually top it up within the hour, then we'll start liquidating you. But even then, they have this increasing price auction where they give the borrower even more time basically to top it up. And sometimes transactions take or debt takes longer to liquidate in maker. So maker is a protocol that's very borrower friendly, and then a protocol like Ave or compound is much more lender friendly, I would say. And so you have these different sides of this, of the spectrum, and it's really a design choice, you know, because they compete in the market, and I think it's TVD what works better and what's ultimately preferred by the market.
Speaker B: Astute the only thing I'd add is there is a trade off here too. Where in the maker design, when you have that hour price delay and then the slower liquidation process, you need to have higher collateral requirements. Because if you do have a worst case scenario where price is trending in a negative direction in the maker system, you need more of a buffer because it takes longer to perform liquidation. You need more. Higher collateral requirements are generally required there. The maker design wouldn't work very well for higher volatility assets like shitcoins. So there's this sort of trade off space that you're alluding to where you could run this slower kind of reverse dust touch auction to bleed less money, but you can't support higher volume assets, and you probably have higher collateral requirements there too.
Speaker C: So big trade off space, definitely. And so why do we care about, I guess, MeV in general? By the way, the connection that I would draw between MEV and OEV is that MEV is basically money that privileged parties in any system can extract from other participants of that system through asymmetry of power or information. And it comes always from a conflict between different preferences, two people wanting the same thing, and then basically bidding to that centralized party in order to get that preference ultimately. And so in the context of MEV, that's the validator. So if two people want to make the same trade, then the two people compete on the fee that they pay to the validator and then split up the price. And so the money goes to validators. And so how does it fit in the context of an oracle update? So when the oracle transaction actually goes on chain, then the liquidations basically become unlocked, and the transaction that's immediately following that oracle update then is the one that can capture that slippage, limit that slippage tolerance in value effectively, or the difference between that and the price at which they can internalize their trade. When you let that uncheck this ability for validators to really like extract different amounts of value from their blocks, then what you end up with is basically possible centralization spiral in the system. And for some systems that's okay. In many cases we solve actually mev through centralization in many real world systems. But in crypto, that's explicitly not what we want. We want to have this really decentralized base layer, because that's a, like the validator layer is the root of trust in Ethereum, and we want Ethereum to become the root of trust in the global financial and economic system in the future. And so that's why we put so much emphasis on keeping that validator layer decentralized. And, yeah, the company that I work for, flashbots, and many others, I would say, have done a lot in order to, in the first step, keep the validator layer decentralized by making the same value blocks available to all the validators to techniques like MEV Boost. But what we're seeing right now is, for example, that a lot of the centralization is basically accumulating at the block building layer. Right now, there's one block builder that's building, I think, 70% of blocks. And this is also something that, that we predicted, because there's a lot of network effect and scale economies and rich get richer effects in MEV and in block building. And so if you look at the block building layer now and you say, wow, it's looking very centralized, then this is effectively what was prevented on the validator layer by introducing systems like MeV Boost. But in the block building layer, it's more isolated and compartmentalized, and we are kind of, it's more solvable in some ways.
Speaker A: Right? Yeah. This has been my understanding since we did our endgame episode with Vitalik, where centralization in the block building layer has more optionality and checks upon the block builders than we do with validators. Once centralization happens at the validator level, it's a one way street. Hard to come back from that. But with centralization, the block builder, there's a lot of checks and balances propose or builder separation is one of these things I want to zoom all the way back out of and talk about the highest level pattern that I see happening here, especially once we extend DeFi to becoming the global financial system. That's why I'm here in crypto. That's why many of us are here in crypto, say these markets aren't growing just by ten x or 100 x, but are 1000 x bigger. We have applications like Aave, like compound, like maker, becoming some of the foundations of borrowing and lending for the entire globe. This is this oracle extractable value in its current form. Without a solution. Here would be a transfer of value from these applications and from the users and customers of these applications towards the infra level. So it's like the infra level taxing the application level applications are leaking value to the infra. And Hazrat, I think, was something that you alluded to is when you do that, you're pressing the gas on the centralization of the infra level. And so with higher level solutions, which I think we're about to get into, with what is being built here at oval, with higher level solutions, applications can actually stop leaking value and start retaining more of their value. And then the infra level is a little bit just more streamlined. It's just smoother because there's less random volatility of 100 ETH MEV blocks being going on, and everything's a little bit more stable and dependable. This is my understanding of the highest level of patterns. Does that vibe, does that check out anything you want to add there?
Speaker B: Yeah, totally. Checkout checks out. And I think where you're going with this, David is on more of like the business side, the business strategy side, or application revenue side. So Hasu's perspective, he wants to kill Mev because he worries about the centralization risks it creates, which I completely agree with. But I think there's another interesting byproduct here where if you can harness MeV within your application, you can use it as a revenue stream to do useful things. I'm of the opinion that just the way this all works, applications will leak MEV. There's ways to design them so they leak less. But eliminating it is going to be impossible. If we being big picture here, design tools, order flow auctions that we're going to get into, if we can design tools to capture that MeV, we can not only decrease the centralization risks that Hasley was referring to, but we can also use that revenue stream to build business models and do useful things. I guess the analogy here, and it's a little bit dangerous because I think some people have controversial views in tradfi on payment for order flow. But if you think what Robinhood has done in the stock market is it used to be that brokers would have this order flow and throw it out there for high frequency trading firms to use, and they were effectively leaking revenue that those high frequency trading firms were capturing. Robinhood, I don't exactly like all the ways they do this, but conceptually, Robinhood said, actually we're going to auction off this order flow and use that revenue to run our business so that we can offer free trading to users. I think conceptually, if you think about DeFi protocols doing similar things with maybe better rules, more auditable rules, more transparency, you can actually get to some pretty interesting business models where MEb capture can drive sustainable long term protocols that do useful things.
Speaker C: Yeah, I definitely agree with that. I would say we definitely don't only care about the decentralization of Ethereum, it's very important because without the decentralization of Ethereum, the whole experiment basically comes to stop. There's still gambling technology that's built on top of it. But especially kind of the base layer of Ethereum is very important to fight for. But that said, so, I mean, flashbots has a triple vision, or three part vision for a good reason. The first part is to illuminate the dark forest. And you can see this through, for example, order flow art, which is this really cool visualization of how your order, like any order, is routed through the MEV supply chain. Like who touches it, who exactly contributed to its eventually filling and getting on chain, and then democratize access to MeV. That's the second part, that's for validators, that they all basically get access to the same MEV. But the final part is distribute value back to users. And this is exactly where Mev share and Oval are coming in, because we have this vision that all MeV should be returned to the parties who created. Because I mean, you can look at this from a few different angles. So on the one hand, all of the applications are in competition with each other. Of course, if they leave so much money on the table that really belongs to their users or to them, and they could reinvest it in the business and make the experience better for users, then applications that don't have internalize the MEV will eventually to themselves, so their users will eventually be out competed. But even more importantly, I think every, like when we look at these crazy numbers, how much money is lost to MEV every year? Like billions of dollars. This is money that somebody lost right at the other end of it. So this is money that's straight coming out of the pocket of someone making a swap on a decentralized exchange, or someone providing liquidity, or someone borrowing on a lending market and getting liquidated. So there's actually a real counterparty behind all of these. And so if you want to build better systems, then we have to build systems that basically are robust to MEV, in the sense that they expose less of it. But the ones that they still expose, they internalize it back to users, to employing techniques like me, Vicha, and over.
Speaker A: And I will add, as the industry of Defi has progressed, it is a story of efficiencies and capital efficiency and less leakage over. This has just been the arc that DeFi is on. This isn't something brand new. All applications are innovating on how to be more capitally efficient, how to best serve their customers. And this is just another milestone on that arc of evolution of DeFi. With that as the context, maybe we can actually get into some of the specifics of the oval mechanism and how we are actually doing this, how we are actually returning value or keeping value in the applications in users hands and stopping nipping some Mev in the bud is maybe how I will frame it. Hart, I'll throw this one to you. Can you just explain the oval mechanism and what it does?
Speaker B: Yeah, absolutely. Oval is a mechanism for OEV capture or capturing this specific type of oracle created MeV. Oval is not an oracle. It uses Chainlink price updates. But what it essentially does is say, hey liquidators, searchers, if you want to use this chainlink price update, if you want to be the first one to use it, you have to participate in an auction and the winner of that auction gets the first right to use this chainlink price update for a specific protocol. Really, all Oval's doing is saying chainlink updates come in, let's run an auction on them. And we run an auction for each protocol. So there's a different auction running for AavE and for compound. And that's so that we can actually understand exactly how much oev is created for AAvE or for compound. And we use flashbots MEV share infrastructure to run this auction process and to actually guarantee or enforce that the searcher that paid the most in the auction, that their money actually gets returned back.
Speaker A: To the protocol seems like a relatively simple mechanism. This is an opt in mechanism by lending applications like AavE compound maker, for example, these things need to elect to use oval, correct?
Speaker B: Correct. You can think of this as like a bolt on for Chainlink. Okay, it wraps a chainlink price update. So right now aave and compound and many, many other Defi protocols have an address where they're like give me the Eth USD price feed from chainlink and what Oval does it says. Okay, we have a contract that looks like Chainlink, but only lets you use that Chainlink price update. If you participated in this auction for a very short window and after that short window is done, then it now looks exactly like Chainlink. It just passes through. It's just a gate that enforces this oev auction happens for a very short period of time before just defaulting back to chainlink. All Defi protocols have to do is swap a single address via governance to bolt on this oval intermediary and begin extracting OEB.
Speaker A: So it's like an auction module that's being appended onto the Oracle price updates that Chainlink is providing. Defi, how did this make sense as to how you brought up the Robinhood analogy, where at one phase in Robinhood's life they were just casting off their user's order flow into the wild and then suffering worse execution for their customers because whoever could do the high frequency trading would get there first, and instead they opted in for an auction mechanism instead in lieu of that. So it's like this little like waiting room before the free market happens for an auction to discover the price, before their users were able to actually get the better price, and they would get a better price as a result. And in this analogy, aaves are the users compound as the users, Makerdao is the users. And instead of just having a access to their liquidations being free for any and all mev bots that come first and execute it suboptimally, instead there is a short window of time for market price to be discovered, fair price to be discovered, and then that value is retained by the lending application. Is this correct?
Speaker B: Yeah, exactly right. That analogy totally holds. And if we go back to the kind of slippage analogy where were saying, hey, this liquidation is going to have a fixed 10% liquidation bonus. Were going to run an auction that says, okay, what does it actually cost? What will people pay here? And people say, okay, ill actually only ill buy this collateral for a 1% discount and 9% gets captured and routed back to the protocol. So we are using the auction to create the market clearing price for the right price to perform the liquidation in these lending markets.
Speaker A: So this solves the problem of some of these lending markets not knowing what the fair price of their collateral is, whether it's a large supply of ether or a supply of shitcoins. They don't know the governance parameters around collateral in aave, compound maker, et cetera. They don't know what the market price is. So they have to basically give themselves worst execution in order to protect themselves. And so this is like a best execution module appended onto their liquidation, which ultimately flows back into the collateral that's liquidated at a better price from their customers, correct?
Speaker B: Yeah, I like this best execution module that I'm going to use that Hasu said it really well. You go back and you think about on Uniswap, I'm wanting to buy a shitcoin price is all over the place. So I set a wide slippage limit just to guarantee I get a fill or I set it tight to keep the price more price guarantee, I don't know. So lending protocols are in the same scenario. They really need to sell this collateral, but they don't know how cheap they need to sell it. And so by running an auction and going through this order flow auction for the right to perform this liquidation, we're able to use market forces and competition to precisely set that liquidation bonus to the market clearing price.
Speaker C: I have some follow on thoughts to that. So this is one of my favorite topics for years, and it's very hard to like nerdsnip people on it. So now is my time. Okay, so give me like my born for this, but so both you actually, so we talk about oracles, which is funny because like both setting your feet, your fee, how much gray you basically want to run a bit per gas, and how much slippage you want to set. Those are both oracle problems in themselves. So they are both problems that are basically you as a user. You have no idea what you should put, and they are very hard to parameterize. In the example of a regular transaction, this is the fee estimation problem. And for regular transfer, this is not too hard to say because you can just look at what's the lowest fee that got into the last block, basically, and you use that as your oracle. Okay, so, and then you parameterize your trade like that. But once there's basically contest between different preferences over the same state. So for example, multiple people trading in the same uniswap pool, and somebody like the one person's trade might make another person's trade invalid because it's now beyond their slippage tolerance. Right now, all of a sudden, parameteritizing your transaction fee is a very difficult problem. And so it basically spills over into the slippage tolerance. The slippage tolerance is basically an extension of the transaction fee. And I mean, what happens here is that you have no idea how much you're paying for your transaction right now. So it's basically your fee plus your slippage. Like you can basically add those and they become in any kind of dextrade, they become your actual transaction fee that you're willing to pay, but you don't know even how much you're actually bidding because that depends on other parties in the block as well. This is where an order flow auction comes in that runs basically at blockbuilding speed as well, because what it really does, it gives you this oracle for how much you should bid in order to get into the block. That's the connection basically between ofas they reveal what is the correct fee to set across all of your parameters, like the transaction fee and the slippage tolerance together, and then they get you into the block at the cheapest possible price when they work, when they have enough bidding taking place.
Speaker B: Yeah, well, to keep going on this, the nerd sniping of it, the liquidators in this system are off chain actors that have full visibility into all these costs and fees. And then through forces of competition, they're figuring out who's going to serve you the best price. So we're able to utilize off chain actors to know things that the protocol itself doesn't know at that moment in time. And I think that's pretty cool.
Speaker A: The off chain actors, they're just the market, and the market knows a lot. The market is the aggregate of all information. And so it's a place where, just like, the aggregate knowledge of the market can actually become to be expressed and then leveraged by the Defi applications.
Speaker B: Yeah, exactly. And while we're talking parameterization, there's interesting knock on effects here, too. So lending markets like Aave, they can't easily onboard shitcoin collateral because the price moves too much or whatever. It could create bad debt for the system. But you could imagine where they onboard shitcoin collateral with a potential 40% liquidation bonus, something really big that if you had to pay that every time, it would be incredibly painful. But you can now do it safely because you have a huge potential bonus, but you have market forces that actually means you're never going to pay that you're going to pay the market clearing price. We've inserted a new tool that gives us real time information to parameterize some of the important parameters within a lending market like AAVE. And we can use that tool to actually onboard new collateral and add new features.
Speaker A: Right. The net effect of this is that blue chip collateral in systems like AAVE, compound maker ether, will probably be able to achieve even better collateral factors. It will be even more efficient to use ether, and this will be true for all the collateral that's currently in there. There's more efficiency, more capital efficiency for all capital assets. And then also the hurdle, the requirement for actually being onboarded into AavE gets easier. So we can actually extend the long tail into further less liquid collaterals simply because we have better market clearing mechanisms in order to enable these things, which is to the net effect of AAVE, just like increased revenue for the application and increased a better product for its customers.
Speaker B: Yeah, they have a useful new tool in their toolbox to make Aave more efficient and support more collateral types.
Speaker A: Hazu Hart talked about how we use some of the MEV share infrastructure in the background. We've talked about the pattern here. We actually haven't talked about so much of the parameters. Maybe you can go into the specifics of, if you pop open the hood of this system, what does it look like in the background? How does this thing work?
Speaker C: Mev share.
Speaker A: Yeah. The part of Mevshare that overall taps into.
Speaker C: Yeah. So Mev share is what I would say, what I would call an order flow auction protocol. So it introduces one new party that we don't typically talk about. And it's called the MEV share node. And it has advised it a protocol because it allows basically for ofas or like, applications to. To be built on top by wallets, by applications like oval, that then kind of extend the service to the lending markets. And it's very customizable. So you can basically customize it across two different dimensions. One is the privacy. So a lot of, in MeV, it's a lot about privacy, right, since we said it's about basically value that can be extracted by having some kind of asymmetry of information. So how much information you reveal and who you reveal it to is a very big lever in MeV. And so in Mev share, you can customize exactly which parts of your transactions are revealed to the bidders, who are the searchers. And there's a kind of general trade off here where if you reveal too much, then you can be front run off chain. For example, you know, you reveal your intent to trade a certain asset, but then somebody just buys up the asset kind of outside, and just, they sandwich you basically outside of the auction. Right. But when you reveal nothing, then you leave a lot of guesswork to the searchers, basically to guess what your intent is. And they may not be very close in their guess. And so you want to find the exact sweet spot between revealing some details, but not so much that you can be front on. And it really depends on the exact application and asset that we are talking about. And this is why we leave. Leave this choice to the applications that build on top of the protocol. The second is for any surplus value that's created. So for the money that's coming in from the bidders, how is that distributed? And so this is also the choice of oval. So between the oval and the lending market and the blockbuilder, and like any other party that they want to specify, who do they want to send the value to that's being created. So that also affects the dynamics of the auction. And so, yeah, you can basically create an order flow and you can parameterize it across these dimensions. And then what happens is in a very simple flow. So like a transaction comes into the MEV node, and then the MEV node selectively reveals information to searchers that they can access. And any search I can access this because it's permissionless. And then the searchers basically send back their bits and very often they will be kind of guessing based because they cannot actually see the full intent of the transaction. They can only, for example, see, okay, this is like a certain uniswap pool. So this is like ETH, USDC or something, but they don't know whether the person is buying or selling or how much. And so what they basically do, what is the right strategy for searchers is to submit not just one trade intent, but submit basically like a whole order book, if you will. So they would basically submit, okay, if they want to buy this much, here's what I would want. If they buy this much, here's what I would want. If they want to sell, here's my bid. And if they want to sell more, here's my bid. So every search just submits basically their own order book. Then inside the Mev node you have what is basically a matching engine, same as on an exchange. So you have now all of the order books from all of the searches laid on top of each other, and you have the one. So these are all of the bits. And then you have to ask from the user and you just match basically the best bit against the user's ask. You wrap them into a bundle and you forward it to block builders and then it goes into the block. And the value part of that bundle is also the redistribution of the value, who it goes to, that's being forwarded to the builder. And I think the top x bundles are forwarded and then the builder can still choose which ones they take, but usually they take the one that pays them the most. Yeah, very roughly speaking, that's how it works.
Speaker A: The pattern that I'm seeing here, I'm just going to go back to my line from earlier, is that the cool thing about Mev is that we once thought it was this massive problem. And one of the patterns that I've seen over time is actually mechanisms are allowing us to leverage this problem into market clearing forces. Hazel, when you tell me that each individual searcher will dump an entire order book into this node, to me that's like saying one of these many thousands of searchers out there are taking their entire view on the market, placing that into a codified order book depositing this order book into a central clearing entity, which is this node that you were talking about, an MEV share. These orders get matched up, everything clears, and all of a sudden we have market clearing forces happening in a very short amount of time, very, very quickly. And so what was once this very toxic centralizing system that was liquidating people at suboptimal prices and was creating centralization forces in our infrastructure, has instead resulted in just super efficient markets, which has always been the Sci-Fi vision for DeFi, I think. Yeah, cool, Hazel. When we talk about one node, maybe more nodes, a few nodes, collecting all of the market information. Sounds centralized. Is there a decentralization of share conversation or of the infra that makes this whole system happen? What's this look like?
Speaker C: Yeah, for sure. You're absolutely right. The Mevshare node is a new centralized actor in the system. So I think in this case, it's not a problem because the search, it doesn't introduce any new trust assumptions in the sense that flashbots is already a block builder and a relay. And so effectively, everybody already trusts us with all of this information. So for us in particular, it doesn't add any trust assumptions, but nonetheless, I mean, we want to decentralize all of our products. So from builder, relay, Mev share. And that is the vision behind suave. And so you did this really great episode with Phil, Diane and Andrew Miller, where you dove into this. And for anyone who hasn't seen it, I would strongly recommend it, because it's such a great intro, but the gist is, I would say that suave is a platform that enables new primitives, in particular, the ability to write private smart contracts and have credible off chain computation. For example, when you look at an order flow option, you see, hey, these are exactly two things that it uses. It uses privacy, but it solves it basically through centralization. So we just send it to a centralized server, and we hope that the server doesn't leak the information, or like, not more than the information that it's supposed to leak. And, well, it's also, it's running off chain, and nobody can validate that like we are. We say that, you know, the MEV share node runs certain code, and it's open source on our GitHub. Right? But do you actually know that this is what we're running? No, you don't. And so, one of the beautiful things about Ethereum is anybody can see the code behind a smart contract and know that this is exactly what the virtual machine executes. Right? And so this is basically, what Swaf does introduces a new virtual machine that can do private computation and has private storage for private data. But you can also write code as smart contracts that could otherwise only execute on an off chain server. When you put those things together, the credible off chain computation and the decentralized privacy, then you get access. You unlock a whole new part of the tech tree. For crypto and MeV in particular, where we eventually want to go with this is decentralized block building. We want the whole auction intents coming in from users and the whole shebang about how that's basically turned into a block and eventually executed on chain. We want to decentralize the whole of that. But for something like Mev shares, this is actually really easy to see how it's one of the first things that benefits from swap, because all you do is you run the same code, but you run it instead of on our centralized server, you run it on swath, and all of a sudden you no longer need to trust flashboards as a centralized party to run the code that we say and to keep your information private, because now you basically delegate all of that trust to a decentralized network.
Speaker A: So if listeners are curious into going down that rabbit hole, Hauser just pointed to the bankless episode about suave that we did. I don't think it would be a mistake to rehash all of that here, but I think this is where that part of the conversation leads. Heart. Go for it.
Speaker B: Yeah. No, no. To add to that, first of all, that episode is really, really good. And I do think of, like Hasu said, mevshare is a protocol for building for order flow auctions with some points of centralization. I look at Suave. Suave is a lot more than that, but I look at suave as going to be a decentralized protocol for order flow auctions, and I'm actually really excited about it. The one other point I want to make on the oval side, the way weve architected this, the trust assumptions oval introduces, I think are just pretty brilliant because the way it works is the absolute worst thing. If Mevshare had rogue code that was stealing the MEV or oval decided to send the MEV to a different address or anything like that. The worst case from a lending protocols perspective is that they don't get the MEV that they weren't otherwise getting. So it's like you're just back.
Speaker A: The worst case is table stakes.
Speaker B: The worst case is table stakes. The other answer here, just because there have been some questions around centralization concerns in the oval design. Even if the MEV share node goes down or the oval node goes down, that infrastructure all breaks as soon as this short auction passes. The oval contract on chain on Ethereum just passes through and lets you read chainlink prices. So it cant censor chain link prices, it cant prevent liquidations. It really is worst case table stakes to what lending protocols have now all youre doing is inserting this short auction that if it were to go rogue, would steal the money you didnt get before. So it's like a really elegant bolt on best execution module as you put it. It does have a point of centralization, but the fallback is super elegant. You're just back to where you started.
Speaker A: You talk about this short auction, how long is it?
Speaker B: It's a parameter of the protocol. They can set it to what they want. And this gets a little bit technical in terms of why would it be more than one block? And the answer is not every block builder or not every block builder is connected to MeV share. And so you don't necessarily have complete coverage on every slot. So you could have basically by our math, and hostile will know this better. You have like 90% of blocks are mined by builders connected to Mevshare. So if you don't have your if your auction happens to land in a block that is not mined or built by Mevshare, a validator picks a block that's not coming from Mevshare. You might not capture your OEV, but yeah, gets a little more technical.
Speaker A: Otherwise it's one block. It's supposed to be one block.
Speaker B: Yeah, 90% of the time you're going to happen the same price update or the same block that the chainlink update would get mined if you didn't use oval.
Speaker C: And the nice thing about MeV shares that it doesn't actually increase the latency of transactions go on chain because it runs during the one block window. And yeah, so as Hart was saying, in the positive or like the normal case, you don't incur any additional penalties. So this is really more of a fail safe mechanism. Right. So just in case kind of either of the two nodes is offline, then you want to have some kind of fallback so that the transaction can still go on chain.
Speaker A: Cool, cool. Understood. So, Hart, I think this kind of brings us to the last bit of conversation which we looked at the technical conversation under the hood, the economic conversation as to the incentives, as to why protocols will adopt this. But I think now we have to get into the bd conversation, because ultimately, things don't move unless humans shake hands over telegram or in discords or whatever. And so you actually need protocols to adopt this system. How's that going?
Speaker B: Going well, we put a proposal up to Aave to adopt oval in a very, very limited way. One of the advantages of AAVE, their standard markets are all interlinked, and they want to be very, very cautious of changing anything because there's billions of dollars at risk. But they also have AavE three isolated markets, which are siloed and separated from the rest of the system. We made a proposal to integrate Oval into AaVE V three markets that have about $10 million of total tvl, which is 0.1% of the total AAVE TVL. And it's a pretty cool way for AavE to experiment with oev capture in a very safe, low risk way and get comfortable, get familiar with it, and potentially roll it out to the broader protocol, where I think, again, if it rolled out to the broader protocol, I think Aave would be more than doubling their revenue. They'd be earning another $25 million a year type thing. Same with compound. And then, of course, there's all these other. We talk about Aave a lot on this podcast, just because it's a good example, but there's all these other defi protocols that we're really excited that are using Chainlink price updates that are leaking MeV, and we have this really easy integration that we've been chatting with and really excited to integrate.
Speaker A: Interesting. I want to actually go down a side quest that's parallel to this, I think. Hash, I think you might be familiar with this. Maybe both of you are. Sorello Labs and their uniswap V four hook. Maybe I can set this up and hash, you can take the rest of it. It's a very similar mechanism, although it's not at all to do with oracle extractable value, but it has to do with impermanent loss in Uniswap, which is now being, I think, rebranded to LVR, which is an equally bad name, but whatever. And so, like, Uniswap LP's are getting squeezed by sex Dex arbitrage. So when like, binance updates its price, that eventually turns into Mev on Dexs. And then Uniswap LP's are just having this arbitrage doubt. And something that Ludwig at Cirella Labs is building is this hooked on Uniswap V four, which is just like oval a gate for liquidity. And if you want to access the liquidity in Uniswap V four that liquidity providers have deposited through this gate, then you have to operate by the rules of this gate and the rules of this gate do something very, very similar to what Hart was talking about here at Oval. Maybe you can talk about just how this works with a little bit more clarity than what I just gave, but also talk about the pattern and how we're seeing this kind of being extrapolated into different contexts.
Speaker C: Yeah, so you're exactly right. So it's the exact same pattern. And I think the pattern is what's most interesting to understand. So if we kind of go back to what we said earlier. So a user wants to trade a token, they don't know what feed to set, they don't know what slippage tolerance to set. So you kind of have this oracle problem of like how much to bid basically to the validator, and you don't even know how much you're bidding. The very same problem the LP's also have because they have a price, and maybe the price is the market price, but then 12 seconds pass, and now all of a sudden they're still quoting that price from 12 seconds ago. Because it's an amm, the price didn't move unless someone trades against it or they kind of updated manually. So they are quoting this outdated price, and now somebody can trade against them. And whether it's an oracle or whether it's a liquidity pool or it's a user making a Dex trade, if you're accepting a certain price and somebody else can see that intent, then they will always push you to the worst possible price. That's what happens in arbitrage. And arbitrage, like, the LVR problem is a problem that's like 20 times bigger than even the oracle problem. So this is like a huge problem, I would say. But the very same insight that overuses can be exactly applied also to liquidity pools. So you basically put, like, as you were calling it, you kind of have two ways of doing it. One, you put a gate and it basically says in order to earn the right to trade on this pool oval style, you have to pay me. And so we run an auction, and so you basically unlock the right to do this. The other way is to basically the pool. There's also an auction, but instead of earning the right to trade, it, like increases basically the transaction fee to the fee that goes to the LP's in the pool. So it makes that variable. And so when it knows that there's like a large, basically demand to trade in the pool, then it would increase the, it would increase the fee to capture more of the mev back to the LP's who are in the pool. So I'm not familiar which model exactly Sorella uses or if they found a third way. But yeah, I think the insight is basically to use some kind of mechanism, some kind of auction that discovers basically the price at which the LP's should quote to the market.
Speaker A: And I'm going to go ahead and. Hart, do you want to say something?
Speaker B: No, I just think the Sorello solution, it is using the gating mechanism. I mean, again, we should have Ludwig and all them talk, but it is a very cool, elegant solution that says, hey, we know there's sec sex arbitrage that's getting leaked here. So if you want to trade against this pool, you got to pay us. And that goes back to the LP's. So I'm really excited for that to get deployed to.
Speaker A: So one last conversation here. So we have oval and this gate, we have this pattern that we were seeing applied on to uniswap with V four, with the project that we just brought up, Sirella Labs. But each of these are taking a cut, right? Because, come on, we are rational economic actors. We want our upside. I'm assuming there's a cut that's part of the whole oval process, is that correct, Hart?
Speaker B: Yeah, there is. I think it makes a lot of sense. Like Hasu said at the beginning, Mev should go back to the protocol that created it or the source that created it. And we very much believe that. So this MeV that we're capturing should go back to aave or compound, and they can mostly go back to aave in compound and they can use it to say, hey, we're gonna keep it for revenue, for the protocol. We're gonna give back to token holders. We're going to reimburse the guy that got liquidated. We're going to make transaction costs free. We're going to pay everybody's gas costs. Whatever they want to do. That's their call. Then I think the infrastructure that extracts that MeV also deserves a fair share for the work of building and maintaining the infrastructure to do so. That's the business model for oval, where we would retain our share for the infrastructure costs. The other thing I'd add is there's other infrastructure costs besides us. There's flashbots, meshare suave in the future. Importantly, in the case of Oracle updates, there's also Chainlink or your Oracle provider. One of the things I'm excited about is using this as a sustainable way to pay for oracle infrastructure as well because it's not cheap. Chainlink is spending millions of dollars a year in gas fees supporting their price feeds as a sort of public service. And this is something that long run is actually a risk to aave and compound because it's not currently sustainable. Chain link needs to get paid Aave.
Speaker A: Compound maker, maybe not. Maker are consuming Chainlink oracle prices and Chainlink is just giving this out to Defi for free. I'm assuming they make money on that somehow. Maybe not.
Speaker B: That's complicated. That's a good question to ask Chainlink. But the price feeds are permissionless. Anyone can access these price feeds for free.
Speaker A: Chainlink itself or insert your generalized oracle provider here also needs to be a part of this process of achieving some sort of take rate in order to make themselves a sustainable business. Otherwise they go away.
Speaker B: Yeah, I agree. Again, Chainlink has many different kind of products and business lines and they do charge or have fees in other circumstances. But the core product that supports most of Defi, like their ETH USD price feed, it's freely accessible and Defi is built on top of it. And figuring out a way to make that be sustainable seems like necessary, right?
Speaker A: Totally, totally. Hazu, I have learned a ton in this conversation. Is there any stone left unturned or maybe just future questions that you have or future topics that I think that you guys might think are next in this conversation? Maybe if we were to resume this conversation in a year or so, maybe what are some ideas that you would hope would have answers or any future conversations that do you think spawns out of this one? Hazu, I'll start with you.
Speaker C: I need to think about this. Can heart go first?
Speaker A: Heart you first?
Speaker B: Well, I'll give you an easy one. How does this work on layer twos? What does the mev supply chain on layer twos look like? What's the type of oracle or oracle related mev that gets leaked on layer twos? And theres actually a whole slew of mev that gets leaked by perpetual exchanges like perp exchanges, decentralized perps, and ways that I think they could be made much more efficient by using auction like structures to price their trades. So thats where my mind goes and weve actually done a lot of work and a lot of research on how Oval would work on l two s and Imdivid. Not enough for this podcast, but I think it's a super fascinating topic and I think it's going to be a big deal.
Speaker C: Yeah, I agree with that I think if you come back in one year, I would be very interested to just do a checkup on how much mev is still being leaked at the application layer, how much basically extra money is leaked by lending protocols. But also we talked about LP's. So for me, that would be interesting if that paradigm with the gate basically unlocking certain actions on chain through an auction, if that's taking hold also in the Dex space. And then for sure, as Hart was saying, as more and more activity goes to layer two. So how can we import some of that same paradigm basically to the layer two sdhe? The layer two s today all have centralized sequencers, and they don't have much of an MEV supply chain to speak of. So they all have a kind of shadow mev supply chain that's kind of co located around the sequencer, but in an uncontrolled way that doesn't benefit the users at all, doesn't even return any money to the sequencer, nor can really be leveraged to build any kind of applications on top, like order flow options yet. So I would say there's some kind of ground infrastructure that needs to be created. And then I think a lot of this technology can be scaled to layer two. And it will be very interesting to see if it looks the same or if it looks different and if it looks different in what ways.
Speaker A: Beautiful. Guys, I think we have a long roadmap of content ahead of us. There's a lot of juice left to squeeze out of these conversations. A lot of juice left to keep in the defi apps. Heart Hazu, thank you so much for coming on and explaining this part of the Defi world to us.
Speaker B: Thanks, David.
Speaker C: Thanks, David. Thanks for having us.
Speaker A: Heart. If people are just interested in learning more about Oval, where should they go?
Speaker B: Yeah, so Oval is an UmA product. Go to Uma Xyz and you can read all about it. And then Twitter. It's ooma protocol. Yeah.
Speaker A: Guys, this has been fantastic. Thank you so much for coming on bankless nation. You know the deal. Crypto is risky. Defi is risky. Hopefully it's becoming a little bit less risky, but you could still lose what you put in. We are headed west. This is the frontier. It's not for everyone. But we're glad you are with us on the bankless journey. Thanks a lot.
